import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as n,o as l}from"./app-BDQL9qnX.js";const e={};function h(t,s){return l(),a("div",null,s[0]||(s[0]=[n(`<h3 id="desscription" tabindex="-1"><a class="header-anchor" href="#desscription"><span>Desscription</span></a></h3><p><a href="https://github.com/laravel/envoy" target="_blank" rel="noopener noreferrer">Laravel Envoy</a> là 1 công cụ giúp excute các task trong quá trình deploy app lên remote server sử dụng blade syntax. Thay vì gõ command hoặc đóng gói trong file ( như sh) thì có thể dùng Laravel Envoy để quản lí và thực thi dễ dàng hơn.</p><h3 id="installation" tabindex="-1"><a class="header-anchor" href="#installation"><span>Installation</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">composer</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> require</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> laravel/envoy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dev</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="usage" tabindex="-1"><a class="header-anchor" href="#usage"><span>Usage:</span></a></h3><p>Các thành phần chính có thể xem tại <a href="https://laravel.com/docs/8.x/envoy" target="_blank" rel="noopener noreferrer">https://laravel.com/docs/8.x/envoy</a>, post chủ yếu focus vào vài điểm nổi bật và example về envoy.</p><p>Đầu tiên cần tạo 1 file <code>Envoy.blade.php</code> tại thư mục root.</p><p>VD 1 task đơn giản. Run tại local và mục đích là list các file, folder</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-php"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">servers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">([</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;localhost&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;127.0.0.1&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;test&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;on&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;localhost&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    ls</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endtask</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Run envoy</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vendor/bin/envoy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol><li><p>Importing: Trường hợp project nhiều task, cần chia nhiều file để quản lí thì có thể dùng <code>@import</code></p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-php"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* Envoy.blade.php */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">servers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">([</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;local&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;127.0.0.1&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;envoys/FirstTask.blade.php&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* FirstTask.blade.php */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;test&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;on&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;local&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    ls</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endtask</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Multiple Server: Deploy nhiều server,</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-php"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">servers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">([</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;local&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;127.0.0.1&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;stg&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;192.168.1.2&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;deploy&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;on&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;local&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;stg&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]],</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;parallel&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    git</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> pull</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> origin</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> master</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    php</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> artisan</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> migrate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">force</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endtask</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Mặc định Envoy sẽ thực hiện lần lượt excute trên từng môi trường. Set param <code>&#39;parallel&#39; =&gt; true</code> để có thể excute cùng lúc trên nhiều server.</p></li><li><p>Variable: excute với variable</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-php"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">servers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">([</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;local&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;127.0.0.1&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;stg&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;192.168.1.2&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">setup</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $server</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $server</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> ?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;local&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;stg&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endsetup</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;test&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;on&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    ls</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endtask</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Mặc định sẽ excute cả 2 server nhưng trường hợp cụ thể có thể chọn server để excute. VD chỉ excute ở local</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vendor/bin/envoy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --server=local</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>Completion Hooks:</p><p>Laravel Envoy hổ trợ các hook <code>@after</code>, <code>@error</code>, <code>@success</code>, and <code>@finished</code> trong quá trình excute, finish các task.</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-php"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">..</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">story</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;deploy&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    test</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    test2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endstory</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;test&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;on&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // do something</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endtask</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;test2&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;on&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     // do something</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endtask</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">after</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Task: </span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">{</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$task</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> completed&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endafter</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Notifications:</p><p>Envoy hổ trợ send notification (Slack, Discord, Telegram) khi excute.</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-php"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">finished</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">    @</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">slack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;webhook-url&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;#bots&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Hello, Slack.&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endfinished</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="example" tabindex="-1"><a class="header-anchor" href="#example"><span>Example:</span></a></h3><p>Khi deploy laravel app lên server thường có các step: Get code từ repository, run composer, update symlinks, optimization, build asset, run migrate.</p><ol><li><p>Get repository:</p><p>Với 1 repository, cần tạo 2 variable repository url và folder chứa src. Để dễ quản lí các release version và có thể rollback nếu phát sinh lỗi, mỗi release nên lưu vào 1 folder và tạo symlinks đến folder release mới nhất.</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-php"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">setup</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // example use github</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $repoUrl</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;git@github.com:&lt;user&gt;/&lt;repository-name&gt;.git&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $baseDir</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/var/www/html&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $releasesDir</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $baseDir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> .</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/releases&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	$releaseDir</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $releasesDir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> .</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> .</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> date</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;YmdHis&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endsetup</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;get_git_repository&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Cloning repository&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // Tạo folder $releasesDir nếu chưa tồn tại</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">d</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $releasesDir }}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $releasesDir }}</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // Clone git repository </span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">	git</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> clone</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">depth</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $repoUrl }}</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $releaseDir }}</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">	cd</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $releaseDir }}</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">	git</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> reset</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">hard</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> origin</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">master</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endtask</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Run composer:</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-php"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;run_composer&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Installing composer dependencies&#39;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    cd</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $releaseDir }}</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    composer</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> install</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">prefer</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">dist</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">no</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">scripts</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">q</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">o</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endtask</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Update symlinks</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-php"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;update_symlinks&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // Tạo symlinks cho storage.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // dữ liệu storage, env sẽ không thay đổi với mỗi lần deploy release.</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Linking storage&#39;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    rm</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">rf</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $releaseDir }}</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">storage</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    ln</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">nfs</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $baseDir }}</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">storage</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $releaseDir }}</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">storage</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Linking .env&#39;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    ln</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">nfs</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $baseDir }}</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">env</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $releaseDir }}</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">env</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Optimization&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // Optimizing Configuration Loading</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    php</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> artisan</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">cache</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // Optimizing Route Loading</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    php</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> artisan</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> route</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">cache</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // Optimizing View Loading</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    php</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> artisan</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> view</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">cache</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Linking current release&#39;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    ln</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">nfs</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $releaseDir }}</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $baseDir }}</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">current</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endtask</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>{{ $baseDir }}/current</code> là path đã setting ở web server.</p><p>VD: nginx</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>server {</span></span>
<span class="line"><span>    root /var/www/html/current/public;</span></span>
<span class="line"><span>	...</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Build asset:</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-php"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;build_assets&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;building asset&#39;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    cd</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $releaseDir }}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    npm</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> install</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    npm</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> build</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endtask</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Migration:</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-php"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;migration&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Running migrations&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    cd</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> {{ $releaseDir }}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">    php</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> artisan</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> migrate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">force</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endtask</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Stories:</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-php"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">story</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;deploy&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">	get_git_repository</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">	run_composer</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">	update_symlinks</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">	build_assets</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">	migration</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">@</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;">endstory</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol>`,15)]))}const r=i(e,[["render",h]]),d=JSON.parse('{"path":"/blogs/Laravel/laravel-envoy_231.html","title":"Laravel Envoy","lang":"en-US","frontmatter":{"title":"Laravel Envoy","date":"2025-08-08T00:00:00.000Z","tags":["Laravel"],"categories":["Laravel"],"author":"Admin","location":"VN","description":"Laravel Envoy","image":null,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Laravel Envoy\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-08-08T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Admin\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/blog/blogs/Laravel/laravel-envoy_231.html"}],["meta",{"property":"og:site_name","content":"Nin Blog"}],["meta",{"property":"og:title","content":"Laravel Envoy"}],["meta",{"property":"og:description","content":"Laravel Envoy"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"article:author","content":"Admin"}],["meta",{"property":"article:tag","content":"Laravel"}],["meta",{"property":"article:published_time","content":"2025-08-08T00:00:00.000Z"}]]},"git":{},"readingTime":{"minutes":2.39,"words":716},"filePathRelative":"blogs/Laravel/laravel-envoy_231.md","excerpt":"<h3>Desscription</h3>\\n<p><a href=\\"https://github.com/laravel/envoy\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Laravel Envoy</a> là 1 công cụ giúp excute các task trong quá trình deploy app lên remote server sử dụng blade syntax. Thay vì gõ command hoặc đóng gói trong file ( như sh) thì có thể dùng Laravel Envoy để quản lí và thực thi dễ dàng hơn.</p>"}');export{r as comp,d as data};
